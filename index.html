<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<meta property="og:title" content="SETTLD ‚Äî The Agent Opportunity">
<meta property="og:description" content="Bridge crypto wealth to VIP casino experiences. Become an agent.">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
<title>SETTLD ‚Äî The Agent Opportunity</title>
<style>
  * { margin: 0; padding: 0; box-sizing: border-box; }
  html, body {
    width: 100%; height: 100vh; overflow: hidden;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
    background: #08080c; color: #e8e8e8;
    -webkit-font-smoothing: antialiased; touch-action: none;
  }
  /* Film grain overlay */
  body::after {
    content: ''; position: fixed; inset: 0; z-index: 999; pointer-events: none; opacity: 0.025;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23n)'/%3E%3C/svg%3E");
  }
  /* Ambient background orbs */
  .ambient-orb {
    position: absolute; border-radius: 50%; pointer-events: none;
    filter: blur(80px); opacity: 0; animation: orbFloat 12s ease-in-out infinite;
  }
  .ambient-orb.orb-1 { width: 300px; height: 300px; background: rgba(201,168,76,0.04); top: 15%; left: -5%; animation-delay: 0s; }
  .ambient-orb.orb-2 { width: 250px; height: 250px; background: rgba(100,130,200,0.03); bottom: 10%; right: -8%; animation-delay: -4s; }
  .ambient-orb.orb-3 { width: 200px; height: 200px; background: rgba(201,168,76,0.025); top: 50%; left: 60%; animation-delay: -8s; }
  @keyframes orbFloat {
    0%, 100% { opacity: 0.6; transform: translate(0, 0) scale(1); }
    25% { opacity: 1; transform: translate(15px, -20px) scale(1.05); }
    50% { opacity: 0.7; transform: translate(-10px, 10px) scale(0.95); }
    75% { opacity: 1; transform: translate(20px, 15px) scale(1.08); }
  }
  /* Elastic bounce feedback */
  .slide.bounce-left { animation: bounceL 0.35s ease-out; }
  .slide.bounce-right { animation: bounceR 0.35s ease-out; }
  .slide.bounce-up { animation: bounceU 0.35s ease-out; }
  .slide.bounce-down { animation: bounceD 0.35s ease-out; }
  @keyframes bounceL { 0% { transform: translateX(0); } 30% { transform: translateX(-18px); } 100% { transform: translateX(0); } }
  @keyframes bounceR { 0% { transform: translateX(0); } 30% { transform: translateX(18px); } 100% { transform: translateX(0); } }
  @keyframes bounceU { 0% { transform: translateY(0); } 30% { transform: translateY(-14px); } 100% { transform: translateY(0); } }
  @keyframes bounceD { 0% { transform: translateY(0); } 30% { transform: translateY(14px); } 100% { transform: translateY(0); } }
  /* Hold-to-peek */
  #peek-overlay {
    position: fixed; inset: 0; z-index: 250; pointer-events: none;
    display: flex; justify-content: center; align-items: center;
    background: rgba(4,4,8,0.85); opacity: 0; transition: opacity 0.2s ease;
    backdrop-filter: blur(8px);
  }
  #peek-overlay.visible { opacity: 1; }
  #peek-card {
    width: 75vw; max-width: 340px; aspect-ratio: 9/16; border-radius: 16px;
    overflow: hidden; border: 1px solid rgba(255,255,255,0.08);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    padding: 24px 20px; text-align: center; transform: scale(0.92); opacity: 0;
    transition: transform 0.25s ease, opacity 0.25s ease;
    box-shadow: 0 20px 60px rgba(0,0,0,0.5);
  }
  #peek-overlay.visible #peek-card { transform: scale(1); opacity: 1; }
  #peek-card .peek-dir { font-size: 8px; font-weight: 700; letter-spacing: 0.2em; text-transform: uppercase; opacity: 0.3; margin-bottom: 12px; }
  #peek-card h2 { font-size: 16px; margin-bottom: 8px; }
  #peek-card p { font-size: 12px; opacity: 0.5; }
  #canvas { width: 100%; height: 100vh; position: relative; overflow: hidden; }
  .slide {
    position: absolute; inset: 0;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    padding: 80px 32px 90px;
    transition: opacity 0.45s cubic-bezier(0.25,0.1,0.25,1), transform 0.45s cubic-bezier(0.25,0.1,0.25,1), filter 0.45s ease;
    will-change: transform, opacity, filter; overflow-y: auto;
  }
  /* Staggered text entrance */
  .slide.active h1 { animation: textUp 0.6s ease-out 0.12s both; }
  .slide.active h2 { animation: textUp 0.6s ease-out 0.18s both; }
  .slide.active p, .slide.active .body { animation: textUp 0.5s ease-out 0.28s both; }
  .slide.active .emoji-big { animation: textUp 0.5s ease-out 0s both; }
  .slide.active table { animation: textUp 0.5s ease-out 0.32s both; }
  .slide.active .quote { animation: textUp 0.6s ease-out 0.22s both; }
  .slide.active .flow-row { animation: textUp 0.5s ease-out 0.22s both; }
  .slide.active .stat { animation: statUp 0.7s ease-out 0.1s both; }
  .slide.active .label { animation: textUp 0.4s ease-out 0s both; }
  .slide.active .pill { animation: textUp 0.4s ease-out 0.4s both; }
  @keyframes textUp { from { opacity: 0; transform: translateY(16px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes statUp { from { opacity: 0; transform: translateY(20px) scale(0.95); } to { opacity: 1; transform: translateY(0) scale(1); } }
  /* Lateral transitions (left/right siblings) */
  .slide.exit-left   { transform: translateX(-100%); opacity: 0; }
  .slide.exit-right  { transform: translateX(100%);  opacity: 0; }
  .slide.enter-left  { transform: translateX(-100%); opacity: 0; }
  .slide.enter-right { transform: translateX(100%);  opacity: 0; }
  /* Depth transitions ‚Äî zoom effect */
  .slide.exit-up     { transform: scale(1.15); opacity: 0; filter: blur(6px); }
  .slide.exit-down   { transform: scale(0.85); opacity: 0; filter: blur(6px); }
  .slide.enter-up    { transform: scale(0.85); opacity: 0; filter: blur(4px); }
  .slide.enter-down  { transform: scale(1.15); opacity: 0; filter: blur(4px); }
  .slide.active      { transform: translate(0,0) scale(1); opacity: 1; filter: blur(0); }

  .theme-black  { background: linear-gradient(160deg, #08080c 0%, #0e0e14 100%); }
  .theme-gold   { background: linear-gradient(160deg, #08080c 0%, #100e06 50%, #151108 100%); }
  .theme-deep   { background: linear-gradient(160deg, #08080c 0%, #0a0f16 100%); }
  .theme-accent { background: linear-gradient(160deg, #08080c 0%, #10080c 50%, #160a10 100%); }
  .theme-green  { background: linear-gradient(160deg, #08080c 0%, #080f0a 100%); }
  .theme-warm   { background: linear-gradient(160deg, #0a0808 0%, #100c06 100%); }

  h1 { font-size: clamp(28px, 7vw, 52px); font-weight: 800; letter-spacing: -0.035em; line-height: 1.06; text-align: center; margin-bottom: 20px; max-width: 680px; }
  h2 { font-size: clamp(21px, 4.8vw, 36px); font-weight: 700; letter-spacing: -0.025em; line-height: 1.12; text-align: center; margin-bottom: 16px; max-width: 620px; }
  p, .body { font-size: clamp(14px, 3.5vw, 17px); line-height: 1.7; text-align: center; max-width: 520px; opacity: 0.75; font-weight: 400; }
  .emoji-big { font-size: clamp(44px, 11vw, 76px); margin-bottom: 24px; }
  .label { font-size: 9px; font-weight: 700; letter-spacing: 0.25em; text-transform: uppercase; opacity: 0.28; margin-bottom: 18px; }
  .stat { font-size: clamp(42px, 11vw, 76px); font-weight: 900; letter-spacing: -0.04em; line-height: 1; margin: 10px 0; color: #c9a84c; text-shadow: 0 0 50px rgba(201,168,76,0.25); }
  .stat-label { font-size: clamp(13px, 2.8vw, 15px); opacity: 0.4; margin-top: 8px; font-weight: 500; }
  .accent { color: #c9a84c; font-weight: 600; }
  .accent-red { color: #d45a6a; font-weight: 600; }
  .accent-green { color: #5cb87a; font-weight: 600; }
  .quote { font-style: italic; font-size: clamp(17px, 4vw, 24px); line-height: 1.55; max-width: 480px; border-left: 1.5px solid rgba(201,168,76,0.3); padding-left: 24px; text-align: left; font-weight: 400; opacity: 0.9; }
  table { border-collapse: separate; border-spacing: 0; font-size: clamp(11px, 2.5vw, 14px); width: 90%; max-width: 460px; margin: 18px 0; background: rgba(255,255,255,0.02); border: 1px solid rgba(255,255,255,0.05); border-radius: 14px; overflow: hidden; backdrop-filter: blur(20px); }
  th, td { padding: 10px 14px; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.04); }
  th { font-weight: 600; opacity: 0.4; font-size: 0.8em; text-transform: uppercase; letter-spacing: 0.1em; }
  tr:last-child td { border-bottom: none; }
  .pill { display: inline-block; padding: 5px 14px; border-radius: 20px; font-size: 10px; font-weight: 600; letter-spacing: 0.08em; margin: 3px; }
  .pill-gold { background: rgba(201,168,76,0.1); color: #c9a84c; border: 1px solid rgba(201,168,76,0.18); }
  .pill-white { background: rgba(255,255,255,0.03); color: rgba(255,255,255,0.5); border: 1px solid rgba(255,255,255,0.07); }
  .flow-row { display: flex; align-items: center; gap: 10px; flex-wrap: wrap; justify-content: center; margin: 14px 0; }
  .flow-box { background: rgba(255,255,255,0.025); border: 1px solid rgba(255,255,255,0.05); border-radius: 14px; padding: 16px 18px; text-align: center; min-width: 85px; backdrop-filter: blur(20px); }
  .flow-arrow { opacity: 0.3; font-size: 18px; }
  .list-item { text-align: left; max-width: 480px; margin: 6px 0; font-size: clamp(13px, 3vw, 17px); line-height: 1.6; opacity: 0.85; }

  /* Nav */
  #topbar { position: fixed; top: 0; left: 0; right: 0; height: 48px; display: flex; align-items: center; padding: 0 16px; z-index: 200; background: linear-gradient(to bottom, rgba(0,0,0,0.6), transparent); }
  #breadcrumb { font-size: 12px; font-weight: 600; opacity: 0.6; display: flex; align-items: center; gap: 4px; flex: 1; }
  #breadcrumb .crumb { opacity: 0.4; cursor: pointer; transition: opacity 0.2s; }
  #breadcrumb .crumb:hover { opacity: 0.8; }
  #breadcrumb .crumb.current { opacity: 1; color: #c9a84c; }
  #breadcrumb .sep { opacity: 0.15; margin: 0 2px; font-size: 10px; }
  #counter { font-size: 11px; font-weight: 700; opacity: 0.4; letter-spacing: 0.05em; margin-left: auto; }
  #map-toggle { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-size: 18px; cursor: pointer; opacity: 0.4; transition: opacity 0.2s; margin-left: 12px; border-radius: 6px; }
  #map-toggle:hover { opacity: 0.9; background: rgba(255,255,255,0.06); }
  #share-btn { width: 32px; height: 32px; display: flex; align-items: center; justify-content: center; font-size: 16px; cursor: pointer; opacity: 0.4; transition: all 0.2s; margin-left: 8px; border-radius: 6px; border: none; background: none; color: #e8e8e8; -webkit-tap-highlight-color: transparent; }
  #share-btn:hover, #share-btn:active { opacity: 0.9; background: rgba(255,255,255,0.06); }
  #share-btn.copied { opacity: 1; color: #c9a84c; }
  #share-toast { position: fixed; bottom: 80px; left: 50%; transform: translateX(-50%) translateY(20px); background: rgba(201,168,76,0.15); border: 1px solid rgba(201,168,76,0.25); color: #c9a84c; padding: 10px 20px; border-radius: 12px; font-size: 13px; font-weight: 600; z-index: 400; opacity: 0; transition: all 0.3s ease; pointer-events: none; backdrop-filter: blur(20px); }
  #share-toast.show { opacity: 1; transform: translateX(-50%) translateY(0); }
  #progress-bar { position: fixed; top: 48px; left: 0; right: 0; height: 1.5px; z-index: 200; display: flex; gap: 2px; padding: 0 20px; }
  #progress-bar .seg { flex: 1; height: 1.5px; border-radius: 1px; background: rgba(255,255,255,0.05); transition: background 0.3s; position: relative; }
  #progress-bar .seg.visited { background: rgba(201,168,76,0.25); }
  #progress-bar .seg.active { background: rgba(201,168,76,0.8); }
  #progress-bar .seg.has-children::after { content: ''; position: absolute; bottom: -3px; left: 50%; transform: translateX(-50%); width: 3px; height: 3px; border-radius: 50%; background: rgba(212,175,55,0.3); }
  #dive-indicator { position: fixed; bottom: 0; left: 0; right: 0; display: flex; flex-direction: column; align-items: center; z-index: 200; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
  #dive-indicator.visible { opacity: 1; }
  /* Peek strip ‚Äî blurred preview of child slide */
  #dive-peek {
    width: 100%; height: 80px; position: relative; overflow: hidden;
    background: rgba(0,0,0,0.3);
    border-top: 1px solid rgba(255,255,255,0.04);
    display: flex; flex-direction: column; justify-content: center; align-items: center;
    backdrop-filter: blur(2px);
    mask-image: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.5) 30%, rgba(0,0,0,0.9) 100%);
    -webkit-mask-image: linear-gradient(to bottom, transparent 0%, rgba(0,0,0,0.5) 30%, rgba(0,0,0,0.9) 100%);
  }
  #dive-peek .peek-title { font-size: 13px; font-weight: 700; opacity: 0.5; letter-spacing: -0.01em; margin-bottom: 2px; }
  #dive-peek .peek-sub { font-size: 10px; opacity: 0.25; font-weight: 500; max-width: 260px; text-align: center; line-height: 1.3; }
  #dive-nav { display: flex; align-items: center; gap: 6px; padding: 8px 0 14px; }
  #dive-nav .arrow { font-size: 14px; opacity: 0.4; animation: bd 1.5s ease-in-out infinite; }
  #dive-nav .dive-label { font-size: 9px; font-weight: 600; letter-spacing: 0.12em; text-transform: uppercase; opacity: 0.25; }
  @keyframes bd { 0%,100%{transform:translateY(0)} 50%{transform:translateY(4px)} }
  #back-indicator { position: fixed; top: 54px; left: 50%; transform: translateX(-50%); display: flex; flex-direction: column; align-items: center; gap: 2px; z-index: 200; opacity: 0; transition: opacity 0.3s; pointer-events: none; }
  #back-indicator.visible { opacity: 1; pointer-events: auto; cursor: pointer; }
  #back-indicator .arrow { font-size: 12px; opacity: 0.35; }
  #back-indicator .back-label { font-size: 9px; font-weight: 600; letter-spacing: 0.08em; opacity: 0.3; }
  #depth-rings { position: fixed; left: 12px; top: 50%; transform: translateY(-50%); display: flex; flex-direction: column; align-items: center; gap: 6px; z-index: 200; }
  .depth-ring { width: 6px; height: 6px; border-radius: 50%; border: 1.5px solid rgba(255,255,255,0.15); transition: all 0.3s; }
  .depth-ring.active { border-color: #c9a84c; background: #c9a84c; box-shadow: 0 0 8px rgba(201,168,76,0.3); }
  .depth-ring.ancestor { border-color: rgba(255,255,255,0.3); background: rgba(255,255,255,0.1); }
  .edge-arrow { position: fixed; top: 50%; transform: translateY(-50%); font-size: 20px; opacity: 0; z-index: 150; transition: opacity 0.2s; pointer-events: none; }
  .edge-arrow.left { left: 24px; }
  .edge-arrow.right { right: 24px; }
  .edge-arrow.visible { opacity: 0.12; }

  #minimap { position: fixed; inset: 0; background: rgba(4,4,8,0.97); z-index: 300; display: none; flex-direction: column; padding: 56px 16px 24px; overflow-y: auto; -webkit-overflow-scrolling: touch; backdrop-filter: blur(30px); }
  #minimap.open { display: flex; }
  #minimap-close { position: fixed; top: 14px; right: 16px; font-size: 22px; cursor: pointer; opacity: 0.4; z-index: 310; transition: opacity 0.2s; }
  #minimap-close:hover { opacity: 0.8; }
  #minimap-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 16px; padding: 0 4px; }
  #minimap-title { font-size: 9px; font-weight: 700; letter-spacing: 0.2em; text-transform: uppercase; opacity: 0.25; margin-bottom: 0; }
  #map-view-toggle { display: flex; gap: 2px; background: rgba(255,255,255,0.04); border-radius: 8px; padding: 2px; }
  #map-view-toggle button { background: none; border: none; color: #e8e8e8; font-size: 13px; padding: 5px 10px; border-radius: 6px; cursor: pointer; opacity: 0.35; transition: all 0.2s; }
  #map-view-toggle button.active { opacity: 0.9; background: rgba(255,255,255,0.08); }
  #map-view-toggle button:hover { opacity: 0.7; }
  /* Section group */
  .map-section { margin-bottom: 20px; }
  .map-section-title { font-size: 11px; font-weight: 700; letter-spacing: 0.08em; opacity: 0.5; margin-bottom: 10px; padding-left: 4px; display: flex; align-items: center; gap: 8px; }
  .map-section-title .sec-num { color: #c9a84c; opacity: 0.7; font-size: 10px; }
  /* Preview card grid */
  .map-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 10px; }
  .map-card { position: relative; aspect-ratio: 9/16; border-radius: 12px; overflow: hidden; cursor: pointer; border: 1.5px solid rgba(255,255,255,0.05); transition: all 0.25s ease; }
  .map-card:hover { border-color: rgba(255,255,255,0.12); transform: scale(1.02); }
  .map-card.current { border-color: rgba(201,168,76,0.5); box-shadow: 0 0 16px rgba(201,168,76,0.15); }
  .map-card-inner { position: absolute; inset: 0; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 12px 10px; text-align: center; pointer-events: none; }
  .map-card-inner .card-emoji { font-size: 22px; margin-bottom: 6px; }
  .map-card-inner .card-title { font-size: 11px; font-weight: 700; line-height: 1.25; letter-spacing: -0.01em; margin-bottom: 4px; }
  .map-card-inner .card-sub { font-size: 9px; opacity: 0.35; font-weight: 500; line-height: 1.3; }
  .map-card-inner .card-id { position: absolute; top: 8px; left: 10px; font-size: 8px; font-weight: 700; opacity: 0.2; letter-spacing: 0.05em; }
  .map-card-inner .card-depth { position: absolute; bottom: 7px; right: 9px; font-size: 8px; opacity: 0.2; }
  /* Keep old text map classes for fallback */
  .map-node { display: flex; align-items: flex-start; gap: 10px; padding: 7px 0; cursor: pointer; opacity: 0.45; transition: opacity 0.2s; }
  .map-node:hover { opacity: 0.85; }
  .map-node.current { opacity: 1; }
  .map-node .map-dot { width: 7px; height: 7px; border-radius: 50%; border: 1.5px solid rgba(255,255,255,0.25); margin-top: 5px; flex-shrink: 0; transition: all 0.3s; }
  .map-node.current .map-dot { border-color: #c9a84c; background: #c9a84c; box-shadow: 0 0 6px rgba(201,168,76,0.3); }
  .map-node .map-label { font-size: 13px; font-weight: 600; line-height: 1.3; }
  .map-node .map-id { font-size: 9px; opacity: 0.25; margin-top: 2px; font-weight: 600; }
  .map-children { padding-left: 18px; border-left: 1px solid rgba(255,255,255,0.04); margin-left: 3px; }
</style>
</head>
<body>
<div id="topbar">
  <div id="breadcrumb"></div>
  <div id="counter"></div>
  <button id="share-btn" onclick="shareDeck()">‚Üó</button>
  <div id="map-toggle" onclick="toggleMap()">‚ò∞</div>
</div>
<div id="progress-bar"></div>
<div id="back-indicator"><span class="arrow">‚Üë</span><span class="back-label">back</span></div>
<div id="dive-indicator">
  <div id="dive-peek"><span class="peek-title"></span><span class="peek-sub"></span></div>
  <div id="dive-nav"><span class="arrow">‚Üì</span><span class="dive-label">swipe down</span></div>
</div>
<div id="depth-rings"></div>
<div class="edge-arrow left">‚Äπ</div>
<div class="edge-arrow right">‚Ä∫</div>
<div id="minimap">
  <div id="minimap-close" onclick="toggleMap()">‚úï</div>
  <div id="minimap-header">
    <div id="minimap-title">Map</div>
    <div id="map-view-toggle">
      <button class="active" onclick="setMapView('grid')" id="btn-grid">‚äû</button>
      <button onclick="setMapView('list')" id="btn-list">‚ò∞</button>
    </div>
  </div>
  <div id="minimap-tree"></div>
</div>
<div id="share-toast"></div>
<div id="peek-overlay"><div id="peek-card"></div></div>
<div id="canvas"></div>

<script>
const TREE = { id:"root", children:[
  {
    id:"1", title:"The Opportunity", theme:"black",
    content:`<div class="label">SETTLD</div>
      <h1>The Agent<br>Opportunity</h1>
      <p>Bridge crypto wealth to VIP casino experiences.<br>Run it as a business.</p>`,
    children:[
      {
        id:"1.1", title:"The $200B Gap", theme:"gold",
        content:`<div class="stat">$200B+</div>
          <div class="stat-label">Macau + Asia gaming revenue at 90-95% recovery</div>
          <br><p>The legacy VIP system collapsed. COVID + regulation killed the old junket model.<br><br>
          <span class="accent">New blood needed.</span> That's you.</p>`
      },
      {
        id:"1.2", title:"Old vs New", theme:"black",
        content:`<h2>What Broke</h2>
          <table>
            <tr><th>Old Model</th><th>SETTLD Model</th></tr>
            <tr><td>Credit-based (trust required)</td><td class="accent">Debit/crypto-backed (trustless)</td></tr>
            <tr><td>OTC partners (risky, 4% fees)</td><td class="accent">Stablecoin pools (on-chain, transparent)</td></tr>
            <tr><td>HK regulations limit pool sizes</td><td class="accent">Smart contract pools, no limits</td></tr>
            <tr><td>Must trust your junket operator</td><td class="accent">Funds visible on-chain</td></tr>
            <tr><td>Restricted to legacy networks</td><td class="accent">Open to crypto-native agents</td></tr>
          </table>`
      },
      {
        id:"1.3", title:"Why Now", theme:"deep",
        content:`<h2>Why Now?</h2>
          <p>
            <span class="accent">1.</span> Legacy Macau operators relocated overseas post-crackdown<br><br>
            <span class="accent">2.</span> Crypto wealth is at all-time highs with nowhere to spend<br><br>
            <span class="accent">3.</span> New casino markets opening (UAE 2027, Korea, SE Asia)<br><br>
            <span class="accent">4.</span> Web3 people haven't experienced VIP casino lifestyle<br><br>
            <span class="accent">5.</span> 95% of legacy business flows through agents ‚Äî that model still works
          </p>`
      }
    ]
  },
  {
    id:"2", title:"How It Works", theme:"deep",
    content:`<div class="emoji-big">‚öôÔ∏è</div>
      <h1>How It Works</h1>
      <p>Three steps. Trustless. Transparent.</p>`,
    children:[
      {
        id:"2.1", title:"The Flow", theme:"deep",
        content:`<h2>The Settlement Flow</h2>
          <div class="flow-row">
            <div class="flow-box"><div style="font-size:24px">üí∞</div><div style="font-size:11px;opacity:0.6;margin-top:4px">Client deposits<br>stablecoin</div></div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-box"><div style="font-size:24px">üîó</div><div style="font-size:11px;opacity:0.6;margin-top:4px">Visible in<br>liquidity pool</div></div>
            <div class="flow-arrow">‚Üí</div>
            <div class="flow-box"><div style="font-size:24px">üé∞</div><div style="font-size:11px;opacity:0.6;margin-top:4px">Casino issues<br>chips</div></div>
          </div>
          <br><p style="opacity:0.6">Crypto-to-crypto. No OTC. No trust required.<br>The smart contract is the escrow.</p>`
      },
      {
        id:"2.2", title:"Your Role as Agent", theme:"deep",
        content:`<h2>Your Role as Agent</h2>
          <p>
            <span class="accent">‚Üí</span> Bring clients to the platform<br><br>
            <span class="accent">‚Üí</span> Clients deposit into pool<br><br>
            <span class="accent">‚Üí</span> They play at VIP tables<br><br>
            <span class="accent">‚Üí</span> House edge generates GGR<br><br>
            <span class="accent">‚Üí</span> You earn a % of GGR from your clients<br><br>
            <span class="accent-red">You win when the house wins.</span><br>
            <span style="opacity:0.5">And the house always wins.</span>
          </p>`
      },
      {
        id:"2.3", title:"The Yield", theme:"gold",
        content:`<h2>Where Yield Comes From</h2>
          <table>
            <tr><td>Source</td><td class="accent">Gross Gaming Revenue (GGR)</td></tr>
            <tr><td>Baccarat house edge</td><td>~1.5% per hand</td></tr>
            <tr><td>Your share</td><td class="accent">% of pool √ó casino performance</td></tr>
            <tr><td>Theoretical range</td><td>100-200% APY</td></tr>
          </table>
          <br><p style="opacity:0.5">Real yield from real casino operations.<br>Not ponzi tokenomics. Not DeFi vaporware.</p>`
      }
    ]
  },
  {
    id:"3", title:"Who You Are", theme:"warm",
    content:`<div class="emoji-big">üéØ</div>
      <h1>Who This Is For</h1>
      <p>Three types of agents we're looking for</p>`,
    children:[
      {
        id:"3.1", title:"Crypto-Native Operators", theme:"warm",
        content:`<h2>Profile 1:<br>Crypto-Native Operators</h2>
          <p>You have a network of crypto-wealthy friends.<br>They want experiences, not another DeFi protocol.<br><br>
          <span class="accent">You bring them to VIP tables.</span><br>
          <span class="accent">They play. You earn.</span><br><br>
          <span class="pill pill-gold">Web3</span>
          <span class="pill pill-gold">High Net Worth Network</span>
          <span class="pill pill-gold">Experience-Driven</span></p>`
      },
      {
        id:"3.2", title:"Legacy Casino Operators", theme:"warm",
        content:`<h2>Profile 2:<br>Legacy Operators</h2>
          <p>Former junket agents or VIP room operators.<br>You left Macau but still have the network.<br><br>
          <span class="accent">Same business. New rails.</span><br>
          Crypto replaces the OTC. Smart contracts replace trust.<br><br>
          <span class="pill pill-white">Former Junket</span>
          <span class="pill pill-white">Macau Network</span>
          <span class="pill pill-white">Relocated</span></p>`
      },
      {
        id:"3.3", title:"Crossover Players", theme:"warm",
        content:`<h2>Profile 3:<br>Crossover Players</h2>
          <p>You go to BOTH crypto conferences AND casino conferences.<br><br>
          You understand the overlap that nobody else sees.<br><br>
          <span class="accent">You are rare. And you are exactly who we need.</span><br><br>
          <span class="pill pill-gold">Consensus</span>
          <span class="pill pill-gold">Token2049</span>
          <span class="pill pill-white">ICE Barcelona</span>
          <span class="pill pill-white">ACE</span></p>`
      }
    ]
  },
  {
    id:"4", title:"The Vision", theme:"gold",
    content:`<div class="label">Long-term</div>
      <h1>Beyond the Table</h1>
      <p>This isn't just casino settlement.<br>It's a membership. A community. A lifestyle.</p>`,
    children:[
      {
        id:"4.1", title:"Mobility Membership", theme:"gold",
        content:`<h2>The Mobility Membership</h2>
          <p>Think <span class="accent">Soho House</span> for crypto-casino mobility.<br><br>
          Not about the clubhouse (not yet).<br>
          About the <strong>routes</strong>:<br><br>
          üåè SE Asia route<br>
          üèúÔ∏è UAE-Saudi route<br>
          üé∞ Korea-Japan route<br><br>
          <span style="opacity:0.5">One carry-on suitcase. Different country every few days.<br>
          You can bring people ‚Üí you earn.</span></p>`
      },
      {
        id:"4.2", title:"Roadmap", theme:"gold",
        content:`<h2>The Path</h2>
          <p>
            <span class="accent">Phase 1:</span> Contracts with 6 casino locations<br>Use their event spaces and VIP rooms<br><br>
            <span class="accent">Phase 2:</span> Own clubhouses, gym, social spaces<br>Soho House-style, crypto-native<br><br>
            <span class="accent">Phase 3:</span> UAE opening 2027<br>Ras Al Khaimah ‚Äî set the regulatory standard<br>for the next wave of gaming
          </p>`
      },
      {
        id:"4.3", title:"The Brand", theme:"black",
        content:`<div class="quote">"It's not about the tech. It's not even about the liquidity. It's about ACCESS. It's about IDENTITY. It's about COMMUNITY."</div>
          <br><p style="opacity:0.4">If you know, you know.</p>`
      }
    ]
  },
  {
    id:"5", title:"Next Steps", theme:"accent",
    content:`<div class="emoji-big">ü§ù</div>
      <h1>Become an Agent</h1>
      <p>The table is set. The chips are ready.<br><span class="accent">Are you in?</span></p>
      <br><p style="opacity:0.4">pak@settld.org</p>`,
    children:[]
  }
]};

// ‚îÄ‚îÄ ENGINE (same as v2) ‚îÄ‚îÄ
const canvas=document.getElementById('canvas'),breadcrumbEl=document.getElementById('breadcrumb'),counterEl=document.getElementById('counter'),progressEl=document.getElementById('progress-bar'),diveEl=document.getElementById('dive-indicator'),backEl=document.getElementById('back-indicator'),depthEl=document.getElementById('depth-rings'),leftArrow=document.querySelector('.edge-arrow.left'),rightArrow=document.querySelector('.edge-arrow.right');
let path=[0],currentSlideEl=null;
function getNode(p){let n=TREE;for(const i of p){if(!n.children||!n.children[i])return null;n=n.children[i]}return n}
function getSiblings(p){if(!p.length)return TREE.children||[];const pp=p.slice(0,-1),par=p.length===1?TREE:getNode(pp);return par?(par.children||[]):[]}
function currentNode(){return getNode(path)}
function currentIndex(){return path[path.length-1]}
function currentSiblings(){return getSiblings(path)}
// Number counter animation
function animateCounters(slide){
  slide.querySelectorAll('.stat').forEach(el=>{
    const raw=el.textContent.trim();
    // Extract number and surrounding text: "$200B+", "100-200%", etc.
    const match=raw.match(/^([^0-9]*)([0-9,.]+)(.*)$/);
    if(!match)return;
    const prefix=match[1],targetStr=match[2],suffix=match[3];
    const target=parseFloat(targetStr.replace(/,/g,''));
    if(isNaN(target))return;
    const hasComma=targetStr.includes(',');
    const duration=800,startTime=performance.now()+200;
    el.textContent=prefix+'0'+suffix;
    function tick(now){
      const elapsed=now-startTime;
      if(elapsed<0){requestAnimationFrame(tick);return}
      const progress=Math.min(elapsed/duration,1);
      // Ease out cubic
      const eased=1-Math.pow(1-progress,3);
      let current=Math.round(target*eased);
      let formatted=hasComma?current.toLocaleString():String(current);
      el.textContent=prefix+formatted+suffix;
      if(progress<1)requestAnimationFrame(tick);
      else el.textContent=raw; // Restore exact original
    }
    requestAnimationFrame(tick);
  });
}
function addAmbientOrbs(slide){
  for(let i=1;i<=3;i++){const o=document.createElement('div');o.className=`ambient-orb orb-${i}`;slide.appendChild(o)}
}
function renderSlide(node,dir){if(!node)return;const s=document.createElement('div');s.className=`slide ${node.theme?'theme-'+node.theme:'theme-black'}`;s.innerHTML=node.content;addAmbientOrbs(s);if(dir)s.classList.add('enter-'+dir);else s.classList.add('active');canvas.appendChild(s);if(currentSlideEl){const old=currentSlideEl;const ed=dir==='left'?'right':dir==='right'?'left':dir==='up'?'down':dir==='down'?'up':'left';old.classList.remove('active');old.classList.add('exit-'+ed);setTimeout(()=>old.remove(),400)}requestAnimationFrame(()=>{requestAnimationFrame(()=>{s.classList.remove('enter-left','enter-right','enter-up','enter-down');s.classList.add('active');animateCounters(s)})});currentSlideEl=s;updateUI()}
function updateUI(){const node=currentNode(),siblings=currentSiblings(),idx=currentIndex(),hasChildren=node&&node.children&&node.children.length>0,isDeep=path.length>1;let crumbs='';for(let d=0;d<path.length;d++){const p=path.slice(0,d+1),n=getNode(p);if(d>0)crumbs+='<span class="sep">‚Ä∫</span>';crumbs+=`<span class="crumb ${d===path.length-1?'current':''}" data-path="${p.join(',')}">${n?(n.title||n.id):''}</span>`}breadcrumbEl.innerHTML=crumbs;breadcrumbEl.querySelectorAll('.crumb').forEach(el=>{el.addEventListener('click',()=>{const tp=el.dataset.path.split(',').map(Number);if(tp.join(',')!==path.join(',')){path=tp;renderSlide(currentNode(),'down')}})});counterEl.textContent=`${idx+1} / ${siblings.length}`;progressEl.innerHTML='';siblings.forEach((sib,i)=>{const seg=document.createElement('div');seg.className='seg';if(i<idx)seg.classList.add('visited');if(i===idx)seg.classList.add('active');if(sib.children&&sib.children.length>0)seg.classList.add('has-children');seg.addEventListener('click',()=>{if(i!==idx){path[path.length-1]=i;renderSlide(currentNode(),i>idx?'left':'right')}});progressEl.appendChild(seg)});if(hasChildren){
    diveEl.classList.add('visible');
    const firstChild=node.children[0];
    const pv=getPreview(firstChild);
    const peekTitle=diveEl.querySelector('.peek-title');
    const peekSub=diveEl.querySelector('.peek-sub');
    if(peekTitle)peekTitle.textContent=firstChild.title||firstChild.id;
    if(peekSub)peekSub.textContent=pv.sub||'';
    // Show child count
    const diveLabel=diveEl.querySelector('.dive-label');
    if(diveLabel)diveLabel.textContent=node.children.length>1?`${node.children.length} sections below`:'swipe down';
  }else{diveEl.classList.remove('visible')}if(isDeep){backEl.classList.add('visible');const pp=path.slice(0,-1),pn=getNode(pp);const bl=backEl.querySelector('.back-label');if(bl&&pn)bl.textContent=pn.title||'back'}else backEl.classList.remove('visible');depthEl.innerHTML='';if(path.length>1){for(let d=0;d<path.length;d++){const r=document.createElement('div');r.className='depth-ring';if(d===path.length-1)r.classList.add('active');else r.classList.add('ancestor');depthEl.appendChild(r)}}leftArrow.classList.toggle('visible',idx>0);rightArrow.classList.toggle('visible',idx<siblings.length-1)}
const minimap=document.getElementById('minimap'),minimapTree=document.getElementById('minimap-tree');
let mapView='grid';
function setMapView(v){mapView=v;document.getElementById('btn-grid').classList.toggle('active',v==='grid');document.getElementById('btn-list').classList.toggle('active',v==='list');renderMap()}
function toggleMap(){minimap.classList.toggle('open');if(minimap.classList.contains('open'))renderMap()}
// Extract a short preview from slide content
function getPreview(node){
  const d=document.createElement('div');d.innerHTML=node.content||'';
  const emoji=(d.querySelector('.emoji-big')||{}).textContent||'';
  const stat=(d.querySelector('.stat')||{}).textContent||'';
  let sub='';
  const p=d.querySelector('p');if(p)sub=p.textContent.substring(0,50);
  return{emoji:emoji||stat,sub};
}
// Theme to CSS gradient for card backgrounds
const themeGrads={
  black:'linear-gradient(160deg,#08080c,#0e0e14)',
  gold:'linear-gradient(160deg,#08080c,#151108)',
  deep:'linear-gradient(160deg,#08080c,#0a0f16)',
  accent:'linear-gradient(160deg,#08080c,#160a10)',
  green:'linear-gradient(160deg,#08080c,#080f0a)',
  warm:'linear-gradient(160deg,#0a0808,#100c06)'
};
function renderMap(){
  minimapTree.innerHTML='';
  if(mapView==='list')return renderListMap();
  TREE.children.forEach((section,si)=>{
    const sec=document.createElement('div');sec.className='map-section';
    // Section header
    const hdr=document.createElement('div');hdr.className='map-section-title';
    hdr.innerHTML=`<span class="sec-num">${si+1}</span> ${section.title||section.id}`;
    sec.appendChild(hdr);
    // Grid of cards
    const grid=document.createElement('div');grid.className='map-grid';
    // Parent card
    const pv=getPreview(section);
    const pc=document.createElement('div');pc.className='map-card';
    if([si].join(',')===path.join(','))pc.classList.add('current');
    pc.style.background=themeGrads[section.theme]||themeGrads.black;
    const hasKids=section.children&&section.children.length>0;
    pc.innerHTML=`<div class="map-card-inner"><div class="card-id">¬ß${section.id}</div>${pv.emoji?`<div class="card-emoji">${pv.emoji}</div>`:''}
      <div class="card-title">${section.title||section.id}</div>
      <div class="card-sub">${pv.sub}</div>${hasKids?`<div class="card-depth">+${section.children.length}</div>`:''}</div>`;
    pc.addEventListener('click',()=>{path=[si];renderSlide(currentNode(),null);toggleMap()});
    grid.appendChild(pc);
    // Children cards
    if(section.children){section.children.forEach((child,ci)=>{
      const cv=getPreview(child);
      const cc=document.createElement('div');cc.className='map-card';
      if([si,ci].join(',')===path.join(','))cc.classList.add('current');
      cc.style.background=themeGrads[child.theme]||themeGrads.black;
      cc.innerHTML=`<div class="map-card-inner"><div class="card-id">¬ß${child.id}</div>${cv.emoji?`<div class="card-emoji">${cv.emoji}</div>`:''}
        <div class="card-title">${child.title||child.id}</div>
        <div class="card-sub">${cv.sub}</div></div>`;
      cc.addEventListener('click',()=>{path=[si,ci];renderSlide(currentNode(),null);toggleMap()});
      grid.appendChild(cc);
    })}
    sec.appendChild(grid);
    minimapTree.appendChild(sec);
  });
}
function renderListMap(){function rn(node,par,np){const el=document.createElement('div');el.className='map-node';if(np.join(',')===path.join(','))el.classList.add('current');el.innerHTML=`<div class="map-dot"></div><div><div class="map-label">${node.title||node.id}</div><div class="map-id">¬ß${node.id}</div></div>`;el.addEventListener('click',()=>{path=[...np];renderSlide(currentNode(),null);toggleMap()});par.appendChild(el);if(node.children&&node.children.length>0){const cc=document.createElement('div');cc.className='map-children';node.children.forEach((c,i)=>rn(c,cc,[...np,i]));par.appendChild(cc)}}TREE.children.forEach((c,i)=>rn(c,minimapTree,[i]))}
backEl.addEventListener('click',()=>navigate('up'));
let isAnimating=false;
function bounce(dir){
  if(!currentSlideEl)return;
  currentSlideEl.classList.remove('bounce-left','bounce-right','bounce-up','bounce-down');
  void currentSlideEl.offsetWidth; // force reflow
  currentSlideEl.classList.add('bounce-'+dir);
  setTimeout(()=>currentSlideEl&&currentSlideEl.classList.remove('bounce-'+dir),400);
}
function navigate(a){if(isAnimating)return;const node=currentNode(),siblings=currentSiblings(),idx=currentIndex();
  switch(a){
    case'right':
      if(idx<siblings.length-1){isAnimating=true;setTimeout(()=>isAnimating=false,420);path[path.length-1]++;renderSlide(currentNode(),'left')}
      else if(path.length>1){isAnimating=true;setTimeout(()=>isAnimating=false,420);path.pop();const pi=path[path.length-1],ps=currentSiblings();if(pi<ps.length-1){path[path.length-1]++;renderSlide(currentNode(),'left')}else renderSlide(currentNode(),'up')}
      else bounce('right');
      break;
    case'left':
      if(idx>0){isAnimating=true;setTimeout(()=>isAnimating=false,420);path[path.length-1]--;renderSlide(currentNode(),'right')}
      else bounce('left');
      break;
    case'down':
      if(node&&node.children&&node.children.length>0){isAnimating=true;setTimeout(()=>isAnimating=false,420);path.push(0);renderSlide(currentNode(),'up')}
      else bounce('down');
      break;
    case'up':
      if(path.length>1){isAnimating=true;setTimeout(()=>isAnimating=false,420);path.pop();renderSlide(currentNode(),'down')}
      else bounce('up');
      break;
  }
}
// Hold-to-peek
const peekOverlay=document.getElementById('peek-overlay'),peekCard=document.getElementById('peek-card');
let holdTimer=null,isPeeking=false;
function getPeekNode(dir){
  const node=currentNode(),siblings=currentSiblings(),idx=currentIndex();
  if(dir==='right'&&idx<siblings.length-1)return{node:siblings[idx+1],label:'Next ‚Üí'};
  if(dir==='left'&&idx>0)return{node:siblings[idx-1],label:'‚Üê Previous'};
  if(dir==='down'&&node&&node.children&&node.children.length>0)return{node:node.children[0],label:'‚Üì Dive in'};
  if(dir==='up'&&path.length>1){const pp=path.slice(0,-1);const pn=getNode(pp);return pn?{node:pn,label:'‚Üë Back up'}:null}
  return null;
}
function showPeek(dir){
  const peek=getPeekNode(dir);if(!peek)return;
  isPeeking=true;
  const bg=themeGrads[peek.node.theme]||themeGrads.black;
  const pv=getPreview(peek.node);
  peekCard.style.background=bg;
  peekCard.innerHTML=`<div class="peek-dir">${peek.label}</div><h2>${peek.node.title||peek.node.id}</h2>${pv.sub?`<p>${pv.sub}</p>`:''}`;
  peekOverlay.classList.add('visible');
}
function hidePeek(){isPeeking=false;peekOverlay.classList.remove('visible')}
let tx=0,ty=0,tt=0;
document.addEventListener('touchstart',e=>{
  tx=e.touches[0].clientX;ty=e.touches[0].clientY;tt=Date.now();
  // Start hold timer for peek
  clearTimeout(holdTimer);
  holdTimer=setTimeout(()=>{
    // Determine direction from touch position
    const vw=window.innerWidth,vh=window.innerHeight,cx=tx,cy=ty;
    let dir=null;
    if(cx<vw*0.2)dir='left'; else if(cx>vw*0.8)dir='right';
    else if(cy<vh*0.25)dir='up'; else if(cy>vh*0.75)dir='down';
    if(dir)showPeek(dir);
  },400);
},{passive:true});
document.addEventListener('touchmove',e=>{
  const dx=Math.abs(e.touches[0].clientX-tx),dy=Math.abs(e.touches[0].clientY-ty);
  if(dx>10||dy>10){clearTimeout(holdTimer);if(isPeeking)hidePeek()}
},{passive:true});
document.addEventListener('touchend',e=>{
  clearTimeout(holdTimer);
  if(isPeeking){hidePeek();return}
  const dx=e.changedTouches[0].clientX-tx,dy=e.changedTouches[0].clientY-ty,dt=Date.now()-tt;
  if(dt>600||(Math.abs(dx)<25&&Math.abs(dy)<25))return;
  if(Math.abs(dx)>Math.abs(dy))navigate(dx<-25?'right':'left');else navigate(dy<-25?'down':'up');
},{passive:true});
document.addEventListener('keydown',e=>{if(minimap.classList.contains('open')){if(e.key==='Escape')toggleMap();return}switch(e.key){case'ArrowRight':case'l':navigate('right');break;case'ArrowLeft':case'h':navigate('left');break;case'ArrowDown':case'j':case' ':navigate('down');e.preventDefault();break;case'ArrowUp':case'k':navigate('up');e.preventDefault();break;case'Escape':if(path.length>1)navigate('up');break;case'm':toggleMap();break}});
let wL=false;document.addEventListener('wheel',e=>{e.preventDefault();if(wL)return;wL=true;setTimeout(()=>wL=false,400);if(Math.abs(e.deltaX)>Math.abs(e.deltaY)&&Math.abs(e.deltaX)>10)navigate(e.deltaX>0?'right':'left');else if(Math.abs(e.deltaY)>10)navigate(e.deltaY>0?'down':'up')},{passive:false});
renderSlide(currentNode(),null);

// ‚îÄ‚îÄ SHARE ‚îÄ‚îÄ
async function shareDeck(){
  const shareData={
    title:'SETTLD ‚Äî The Agent Opportunity',
    text:'Bridge crypto wealth to VIP casino experiences. Become an agent.',
    url:window.location.href
  };
  const toast=document.getElementById('share-toast');
  const btn=document.getElementById('share-btn');
  try{
    if(navigator.share){
      await navigator.share(shareData);
    }else{
      await navigator.clipboard.writeText(window.location.href);
      btn.classList.add('copied');
      toast.textContent='Link copied ‚úì';
      toast.classList.add('show');
      setTimeout(()=>{toast.classList.remove('show');btn.classList.remove('copied')},2000);
    }
  }catch(e){
    if(e.name!=='AbortError'){
      await navigator.clipboard.writeText(window.location.href);
      toast.textContent='Link copied ‚úì';
      toast.classList.add('show');
      setTimeout(()=>toast.classList.remove('show'),2000);
    }
  }
}
</script>
</body>
</html>
